{
  "aws_regions": {
    "us-east-1": {
      "cidr_block": "10.10.0.0/16",
      "ipv6_prefix": "2600:10::/56",
      "availability_zones": [
        "us-east-1a",
        "us-east-1b",
        "us-east-1c"
      ],
      "enable_transit_gateway": true,
      "enable_network_firewall": false,
      "enable_gateway_lb": false,
      "transit_gateway_connect": {
        "enable": true,
        "transport_vpc": "shared-services",
        "subnet_tier": "ingress",
        "peer_bgp_asn": 65200,
        "inside_cidr": "169.254.110.0/29",
        "protocol": "gre",
        "connector": {
          "name_prefix": "skyforge-us-east1-fortinet",
          "instance_type": "c5.xlarge",
          "advertised_prefixes": [
            "10.10.0.0/20",
            "10.10.32.0/20"
          ],
          "management_cidrs": [
            "198.51.100.0/24",
            "203.0.113.0/24"
          ]
        }
      },
      "app_stack": {
        "enable": true,
        "frontend_vpc": "dmz",
        "frontend_tier": "frontend",
        "app_vpc": "shared-services",
        "app_tier": "app",
        "data_vpc": "shared-services",
        "data_tier": "data",
        "create_eks": true,
        "create_alb": true,
        "create_rds": true,
        "create_app_asg": true,
        "create_global_accelerator": false
      },
      "vpcs": {
        "shared-services": {
          "cidr_block": "10.10.0.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "app",
            "data"
          ]
        },
        "inspection": {
          "cidr_block": "10.10.16.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "inspection",
            "egress"
          ]
        },
        "dmz": {
          "cidr_block": "10.10.32.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "frontend",
            "backend"
          ]
        },
        "bastion": {
          "cidr_block": "10.10.48.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "management"
          ]
        },
        "logging": {
          "cidr_block": "10.10.56.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "ops"
          ]
        },
        "serverless": {
          "cidr_block": "10.10.64.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "private",
            "lambda"
          ]
        }
      },
      "security_groups": [
        {
          "name": "bastion-admin",
          "description": "Administrative access to bastion hosts",
          "vpc": "bastion",
          "ingress": [
            {
              "description": "SSH from corporate",
              "protocol": "tcp",
              "from_port": 22,
              "to_port": 22,
              "cidr_blocks": [
                "198.51.100.0/24",
                "203.0.113.0/24"
              ]
            },
            {
              "description": "RDP from corporate",
              "protocol": "tcp",
              "from_port": 3389,
              "to_port": 3389,
              "cidr_blocks": [
                "198.51.100.0/24"
              ]
            }
          ],
          "egress": [
            {
              "protocol": "-1",
              "from_port": 0,
              "to_port": 0,
              "cidr_blocks": [
                "0.0.0.0/0"
              ]
            }
          ]
        },
        {
          "name": "logging-ingest",
          "description": "Allow syslog collection from internal networks",
          "vpc": "logging",
          "ingress": [
            {
              "description": "Syslog TLS",
              "protocol": "tcp",
              "from_port": 6514,
              "to_port": 6514,
              "cidr_blocks": [
                "10.0.0.0/8"
              ]
            },
            {
              "description": "Syslog UDP",
              "protocol": "udp",
              "from_port": 514,
              "to_port": 514,
              "cidr_blocks": [
                "10.0.0.0/8"
              ]
            }
          ],
          "egress": [
            {
              "protocol": "-1",
              "from_port": 0,
              "to_port": 0,
              "cidr_blocks": [
                "0.0.0.0/0"
              ]
            }
          ]
        },
        {
          "name": "lambda-egress",
          "description": "Serverless workload egress controls",
          "vpc": "serverless",
          "ingress": [],
          "egress": [
            {
              "description": "External HTTPS",
              "protocol": "tcp",
              "from_port": 443,
              "to_port": 443,
              "cidr_blocks": [
                "0.0.0.0/0"
              ]
            },
            {
              "description": "Internal APIs",
              "protocol": "tcp",
              "from_port": 8443,
              "to_port": 8443,
              "cidr_blocks": [
                "10.0.0.0/8"
              ]
            }
          ]
        }
      ],
      "network_acls": [
        {
          "name": "dmz-frontend-web",
          "vpc": "dmz",
          "subnet_tiers": [
            "frontend"
          ],
          "ingress": [
            {
              "rule_no": 100,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "0.0.0.0/0",
              "from_port": 80,
              "to_port": 80
            },
            {
              "rule_no": 110,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "0.0.0.0/0",
              "from_port": 443,
              "to_port": 443
            },
            {
              "rule_no": 200,
              "action": "deny",
              "protocol": "all",
              "cidr": "0.0.0.0/0",
              "from_port": 0,
              "to_port": 0
            }
          ],
          "egress": [
            {
              "rule_no": 100,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "0.0.0.0/0",
              "from_port": 0,
              "to_port": 65535
            }
          ]
        },
        {
          "name": "logging-ingress-acl",
          "vpc": "logging",
          "subnet_tiers": [
            "ingress"
          ],
          "ingress": [
            {
              "rule_no": 100,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "10.0.0.0/8",
              "from_port": 6514,
              "to_port": 6514
            },
            {
              "rule_no": 110,
              "action": "allow",
              "protocol": "udp",
              "cidr": "10.0.0.0/8",
              "from_port": 514,
              "to_port": 514
            }
          ],
          "egress": [
            {
              "rule_no": 100,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "0.0.0.0/0",
              "from_port": 0,
              "to_port": 65535
            }
          ]
        }
      ],
      "vpc_endpoints": {
        "interface": [
          {
            "name": "ssm",
            "service": "ssm",
            "vpc": "shared-services",
            "subnet_tiers": [
              "app"
            ],
            "allowed_cidrs": [
              "10.10.0.0/16"
            ]
          },
          {
            "name": "logs",
            "service": "logs",
            "vpc": "shared-services",
            "subnet_tiers": [
              "app"
            ],
            "allowed_cidrs": [
              "10.10.0.0/16"
            ]
          },
          {
            "name": "ssmmessages",
            "service": "ssmmessages",
            "vpc": "shared-services",
            "subnet_tiers": [
              "app"
            ],
            "allowed_cidrs": [
              "10.10.0.0/16"
            ]
          }
        ]
      },
      "nat_gateways": [
        {
          "name": "use1-shared-nat",
          "vpc": "shared-services",
          "public_subnet_tier": "ingress",
          "private_subnet_tiers": [
            "app",
            "data"
          ]
        }
      ],
      "vpc_peerings": [
        {
          "name": "shared-to-logging",
          "vpc_a": "shared-services",
          "vpc_b": "logging",
          "description": "Peer shared services and logging VPCs"
        }
      ],
      "prefix_lists": [
        {
          "name": "corp-sites",
          "max_entries": 5,
          "entries": [
            {
              "cidr": "198.51.100.0/24",
              "description": "Corp HQ"
            },
            {
              "cidr": "203.0.113.0/24",
              "description": "Corp DR"
            }
          ]
        }
      ]
    },
    "eu-central-1": {
      "cidr_block": "10.20.0.0/16",
      "ipv6_prefix": "2600:20::/56",
      "availability_zones": [
        "eu-central-1a",
        "eu-central-1b",
        "eu-central-1c"
      ],
      "enable_transit_gateway": true,
      "enable_network_firewall": true,
      "enable_gateway_lb": false,
      "app_stack": {
        "enable": true,
        "frontend_vpc": "dmz",
        "frontend_tier": "frontend",
        "app_vpc": "shared-services",
        "app_tier": "app",
        "data_vpc": "shared-services",
        "data_tier": "data",
        "create_eks": true,
        "create_alb": true,
        "create_rds": true,
        "create_app_asg": true,
        "create_global_accelerator": false
      },
      "vpcs": {
        "shared-services": {
          "cidr_block": "10.20.0.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "app",
            "data"
          ]
        },
        "inspection": {
          "cidr_block": "10.20.16.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "inspection",
            "egress"
          ]
        },
        "dmz": {
          "cidr_block": "10.20.32.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "frontend",
            "backend"
          ]
        },
        "bastion": {
          "cidr_block": "10.20.48.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "management"
          ]
        },
        "logging": {
          "cidr_block": "10.20.56.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "ops"
          ]
        },
        "serverless": {
          "cidr_block": "10.20.64.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "private",
            "lambda"
          ]
        }
      },
      "security_groups": [
        {
          "name": "ops-bastion",
          "description": "Operations SSH access",
          "vpc": "bastion",
          "ingress": [
            {
              "description": "SSH from Zurich",
              "protocol": "tcp",
              "from_port": 22,
              "to_port": 22,
              "cidr_blocks": [
                "145.12.0.0/16"
              ]
            }
          ],
          "egress": [
            {
              "protocol": "-1",
              "from_port": 0,
              "to_port": 0,
              "cidr_blocks": [
                "0.0.0.0/0"
              ]
            }
          ]
        },
        {
          "name": "analytics-endpoints",
          "description": "Allow HTTPS ingestion from application tier",
          "vpc": "shared-services",
          "ingress": [
            {
              "description": "HTTPS from app VPC",
              "protocol": "tcp",
              "from_port": 443,
              "to_port": 443,
              "cidr_blocks": [
                "10.20.32.0/20"
              ]
            }
          ],
          "egress": [
            {
              "protocol": "-1",
              "from_port": 0,
              "to_port": 0,
              "cidr_blocks": [
                "0.0.0.0/0"
              ]
            }
          ]
        }
      ],
      "network_acls": [
        {
          "name": "data-tier",
          "vpc": "shared-services",
          "subnet_tiers": [
            "data"
          ],
          "ingress": [
            {
              "rule_no": 100,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "10.20.32.0/20",
              "from_port": 5432,
              "to_port": 5432
            },
            {
              "rule_no": 200,
              "action": "deny",
              "protocol": "all",
              "cidr": "0.0.0.0/0",
              "from_port": 0,
              "to_port": 0
            }
          ],
          "egress": [
            {
              "rule_no": 100,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "10.20.32.0/20",
              "from_port": 0,
              "to_port": 65535
            }
          ]
        }
      ],
      "network_firewall": {
        "stateful_rules": [
          {
            "name": "allow-dmz-https",
            "description": "Allow DMZ HTTPS to shared services",
            "action": "pass",
            "protocol": "tcp",
            "source": "10.20.32.0/20",
            "source_port": "any",
            "destination": "10.20.0.0/20",
            "destination_port": "443",
            "sid": 110,
            "rev": 1
          },
          {
            "name": "allow-dmz-http",
            "description": "Allow DMZ HTTP to shared services",
            "action": "pass",
            "protocol": "tcp",
            "source": "10.20.32.0/20",
            "source_port": "any",
            "destination": "10.20.0.0/20",
            "destination_port": "80",
            "sid": 111,
            "rev": 1
          },
          {
            "name": "allow-dmz-nodeport-http",
            "description": "Permit DMZ traffic to NodePort HTTP",
            "action": "pass",
            "protocol": "tcp",
            "source": "10.20.32.0/20",
            "source_port": "any",
            "destination": "10.20.0.0/20",
            "destination_port": "30080",
            "sid": 112,
            "rev": 1
          },
          {
            "name": "allow-dmz-nodeport-https",
            "description": "Permit DMZ traffic to NodePort HTTPS",
            "action": "pass",
            "protocol": "tcp",
            "source": "10.20.32.0/20",
            "source_port": "any",
            "destination": "10.20.0.0/20",
            "destination_port": "30443",
            "sid": 113,
            "rev": 1
          },
          {
            "name": "allow-app-to-db",
            "description": "Allow application tier to reach PostgreSQL",
            "action": "pass",
            "protocol": "tcp",
            "source": "10.20.0.0/20",
            "source_port": "any",
            "destination": "10.20.0.0/20",
            "destination_port": "5432",
            "sid": 130,
            "rev": 1
          },
          {
            "name": "allow-syslog-udp",
            "description": "Permit UDP syslog to logging tier",
            "action": "pass",
            "protocol": "udp",
            "source": "10.20.0.0/20",
            "source_port": "any",
            "destination": "10.20.56.0/21",
            "destination_port": "514",
            "sid": 135,
            "rev": 1
          },
          {
            "name": "allow-syslog-tls",
            "description": "Permit TLS syslog to logging tier",
            "action": "pass",
            "protocol": "tcp",
            "source": "10.20.0.0/20",
            "source_port": "any",
            "destination": "10.20.56.0/21",
            "destination_port": "6514",
            "sid": 136,
            "rev": 1
          },
          {
            "name": "allow-corp-to-mgmt-ssh",
            "description": "Permit corporate SSH to management tier",
            "action": "pass",
            "protocol": "tcp",
            "source": "198.51.100.0/24",
            "source_port": "any",
            "destination": "10.20.48.0/21",
            "destination_port": "22",
            "sid": 140,
            "rev": 1
          },
          {
            "name": "allow-corp-to-mgmt-https",
            "description": "Permit corporate HTTPS to management tier",
            "action": "pass",
            "protocol": "tcp",
            "source": "198.51.100.0/24",
            "source_port": "any",
            "destination": "10.20.48.0/21",
            "destination_port": "443",
            "sid": 141,
            "rev": 1
          },
          {
            "name": "block-telnet",
            "description": "Deny Telnet anywhere",
            "action": "drop",
            "protocol": "tcp",
            "source": "any",
            "source_port": "any",
            "destination": "any",
            "destination_port": "23",
            "sid": 300,
            "rev": 1
          },
          {
            "name": "block-default",
            "description": "Default deny for unmatched flows",
            "action": "drop",
            "protocol": "ip",
            "source": "any",
            "source_port": "any",
            "destination": "any",
            "destination_port": "any",
            "sid": 400,
            "rev": 1
          }
        ],
        "stateless_rules": [
          {
            "priority": 5,
            "action": "aws:pass",
            "source_cidrs": [
              "10.20.32.0/20"
            ],
            "destination_cidrs": [
              "10.20.0.0/20"
            ],
            "destination_ports": [
              {
                "from_port": 80,
                "to_port": 80
              },
              {
                "from_port": 443,
                "to_port": 443
              }
            ],
            "protocols": [
              "tcp"
            ]
          },
          {
            "priority": 10,
            "action": "aws:pass",
            "source_cidrs": [
              "10.20.32.0/20"
            ],
            "destination_cidrs": [
              "10.20.0.0/20"
            ],
            "destination_ports": [
              {
                "from_port": 30080,
                "to_port": 30443
              }
            ],
            "protocols": [
              "tcp"
            ]
          },
          {
            "priority": 15,
            "action": "aws:pass",
            "source_cidrs": [
              "10.20.0.0/20"
            ],
            "destination_cidrs": [
              "10.20.56.0/21"
            ],
            "destination_ports": [
              {
                "from_port": 514,
                "to_port": 514
              },
              {
                "from_port": 6514,
                "to_port": 6514
              }
            ],
            "protocols": [
              "tcp",
              "udp"
            ]
          },
          {
            "priority": 20,
            "action": "aws:pass",
            "source_cidrs": [
              "198.51.100.0/24"
            ],
            "destination_cidrs": [
              "10.20.48.0/21"
            ],
            "destination_ports": [
              {
                "from_port": 22,
                "to_port": 22
              },
              {
                "from_port": 443,
                "to_port": 443
              }
            ],
            "protocols": [
              "tcp"
            ]
          },
          {
            "priority": 200,
            "action": "aws:drop",
            "source_cidrs": [
              "0.0.0.0/0"
            ],
            "destination_cidrs": [
              "0.0.0.0/0"
            ],
            "protocols": [
              "tcp",
              "udp",
              "icmp"
            ]
          }
        ],
        "default_actions": {
          "forward": [
            "aws:forward_to_sfe"
          ],
          "fragment": [
            "aws:forward_to_sfe"
          ]
        }
      }
    },
    "ap-northeast-1": {
      "cidr_block": "10.30.0.0/16",
      "ipv6_prefix": "2600:30::/56",
      "availability_zones": [
        "ap-northeast-1a",
        "ap-northeast-1c",
        "ap-northeast-1d"
      ],
      "enable_transit_gateway": true,
      "enable_network_firewall": false,
      "enable_gateway_lb": true,
      "gwlb_paloalto": {
        "ami_product_code": "6njl1pau431dv08p2e1q64218",
        "instance_type": "m5.xlarge",
        "instance_count": 2,
        "name_prefix": "skyforge-palo-apne1",
        "bootstrap": {
          "hostname": "skyforge-palo-apne1",
          "admin_username": "skyforgeadmin",
          "admin_password": "Skyforge!Pass123",
          "dns_servers": [
            "1.1.1.1",
            "8.8.8.8"
          ],
          "ntp_servers": [
            "time.google.com",
            "pool.ntp.org"
          ],
          "log_profile": "Skyforge-Log-Profile",
          "address_objects": [
            {
              "name": "corp-hq",
              "value": "198.51.100.0/24",
              "description": "Corporate HQ source addresses"
            },
            {
              "name": "corp-dr",
              "value": "203.0.113.0/24",
              "description": "Corporate DR source addresses"
            },
            {
              "name": "dmz-ingress",
              "value": "10.30.32.0/20",
              "description": "Regional DMZ front-end subnets"
            },
            {
              "name": "app-tier",
              "value": "10.30.0.0/20",
              "description": "Shared services application tier"
            },
            {
              "name": "logging-tier",
              "value": "10.30.56.0/21",
              "description": "Logging VPC ingest subnets"
            },
            {
              "name": "mgmt-tier",
              "value": "10.30.48.0/21",
              "description": "Management / bastion subnets"
            },
            {
              "name": "inspection-tier",
              "value": "10.30.16.0/20",
              "description": "Inline inspection VPC"
            }
          ],
          "service_objects": [
            {
              "name": "svc-http",
              "protocol": "tcp",
              "destination_port": "80",
              "description": "HTTP ingress"
            },
            {
              "name": "svc-https",
              "protocol": "tcp",
              "destination_port": "443",
              "description": "HTTPS ingress"
            },
            {
              "name": "svc-syslog-tcp",
              "protocol": "tcp",
              "destination_port": "6514",
              "description": "TLS syslog"
            },
            {
              "name": "svc-syslog-udp",
              "protocol": "udp",
              "destination_port": "514",
              "description": "UDP syslog"
            },
            {
              "name": "svc-eks-nodeport-http",
              "protocol": "tcp",
              "destination_port": "30080",
              "description": "EKS NodePort HTTP"
            },
            {
              "name": "svc-eks-nodeport-https",
              "protocol": "tcp",
              "destination_port": "30443",
              "description": "EKS NodePort HTTPS"
            },
            {
              "name": "svc-mgmt-ssh",
              "protocol": "tcp",
              "destination_port": "22",
              "description": "SSH management"
            },
            {
              "name": "svc-mgmt-https",
              "protocol": "tcp",
              "destination_port": "443",
              "description": "HTTPS management"
            }
          ],
          "security_policies": [
            {
              "name": "allow-untrust-to-app-https",
              "description": "Permit HTTPS from internet to regional app tier",
              "source_zones": [
                "untrust"
              ],
              "destination_zones": [
                "inspection",
                "trust"
              ],
              "source_addresses": [
                "any"
              ],
              "destination_addresses": [
                "dmz-ingress"
              ],
              "applications": [
                "ssl"
              ],
              "services": [
                "svc-https"
              ],
              "action": "allow"
            },
            {
              "name": "allow-untrust-to-app-http",
              "description": "Permit HTTP from internet to regional app tier",
              "source_zones": [
                "untrust"
              ],
              "destination_zones": [
                "inspection",
                "trust"
              ],
              "source_addresses": [
                "any"
              ],
              "destination_addresses": [
                "dmz-ingress"
              ],
              "applications": [
                "web-browsing"
              ],
              "services": [
                "svc-http"
              ],
              "action": "allow"
            },
            {
              "name": "allow-corp-to-management",
              "description": "Permit corporate access to management services",
              "source_zones": [
                "untrust"
              ],
              "destination_zones": [
                "trust"
              ],
              "source_addresses": [
                "corp-hq",
                "corp-dr"
              ],
              "destination_addresses": [
                "mgmt-tier"
              ],
              "applications": [
                "ssh",
                "ssl"
              ],
              "services": [
                "svc-mgmt-ssh",
                "svc-mgmt-https"
              ],
              "action": "allow"
            },
            {
              "name": "allow-trust-to-logging",
              "description": "Allow application tier to forward telemetry to logging VPC",
              "source_zones": [
                "trust"
              ],
              "destination_zones": [
                "inspection",
                "untrust"
              ],
              "source_addresses": [
                "app-tier"
              ],
              "destination_addresses": [
                "logging-tier"
              ],
              "applications": [
                "syslog"
              ],
              "services": [
                "svc-syslog-tcp",
                "svc-syslog-udp"
              ],
              "action": "allow"
            },
            {
              "name": "allow-inspection-to-eks",
              "description": "Permit inspection appliances to reach EKS NodePort services",
              "source_zones": [
                "inspection"
              ],
              "destination_zones": [
                "trust"
              ],
              "source_addresses": [
                "inspection-tier"
              ],
              "destination_addresses": [
                "app-tier"
              ],
              "applications": [
                "any"
              ],
              "services": [
                "svc-eks-nodeport-http",
                "svc-eks-nodeport-https"
              ],
              "action": "allow"
            },
            {
              "name": "deny-untrust-to-management",
              "description": "Block untrusted access to management tier",
              "source_zones": [
                "untrust"
              ],
              "destination_zones": [
                "trust"
              ],
              "source_addresses": [
                "any"
              ],
              "destination_addresses": [
                "mgmt-tier"
              ],
              "applications": [
                "any"
              ],
              "services": [
                "application-default"
              ],
              "action": "deny"
            },
            {
              "name": "deny-all-default",
              "description": "Catch-all deny with logging",
              "source_zones": [
                "any"
              ],
              "destination_zones": [
                "any"
              ],
              "source_addresses": [
                "any"
              ],
              "destination_addresses": [
                "any"
              ],
              "applications": [
                "any"
              ],
              "services": [
                "application-default"
              ],
              "action": "deny"
            }
          ]
        }
      },
      "app_stack": {
        "enable": true,
        "frontend_vpc": "dmz",
        "frontend_tier": "frontend",
        "app_vpc": "shared-services",
        "app_tier": "app",
        "data_vpc": "shared-services",
        "data_tier": "data",
        "create_eks": true,
        "create_alb": true,
        "create_rds": true,
        "create_app_asg": true,
        "create_global_accelerator": false
      },
      "vpcs": {
        "shared-services": {
          "cidr_block": "10.30.0.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "app",
            "data"
          ]
        },
        "inspection": {
          "cidr_block": "10.30.16.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "inspection",
            "egress"
          ]
        },
        "dmz": {
          "cidr_block": "10.30.32.0/20",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "frontend",
            "backend"
          ]
        },
        "bastion": {
          "cidr_block": "10.30.48.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "management"
          ]
        },
        "logging": {
          "cidr_block": "10.30.56.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "ingress",
            "ops"
          ]
        },
        "serverless": {
          "cidr_block": "10.30.64.0/21",
          "tier_subnet_prefix": 4,
          "tiers": [
            "private",
            "lambda"
          ]
        }
      },
      "security_groups": [
        {
          "name": "gwlb-management",
          "description": "Management access to Palo Alto instances",
          "vpc": "inspection",
          "ingress": [
            {
              "description": "HTTPS firewall management",
              "protocol": "tcp",
              "from_port": 443,
              "to_port": 443,
              "cidr_blocks": [
                "203.0.113.0/24"
              ]
            }
          ],
          "egress": [
            {
              "protocol": "-1",
              "from_port": 0,
              "to_port": 0,
              "cidr_blocks": [
                "0.0.0.0/0"
              ]
            }
          ]
        },
        {
          "name": "eks-ingress",
          "description": "Allow inbound traffic to EKS services",
          "vpc": "shared-services",
          "ingress": [
            {
              "description": "Service HTTP",
              "protocol": "tcp",
              "from_port": 30080,
              "to_port": 30080,
              "cidr_blocks": [
                "10.30.0.0/16"
              ]
            },
            {
              "description": "Service HTTPS",
              "protocol": "tcp",
              "from_port": 30443,
              "to_port": 30443,
              "cidr_blocks": [
                "10.30.0.0/16"
              ]
            }
          ],
          "egress": [
            {
              "protocol": "-1",
              "from_port": 0,
              "to_port": 0,
              "cidr_blocks": [
                "0.0.0.0/0"
              ]
            }
          ]
        }
      ],
      "network_acls": [
        {
          "name": "bastion-acl",
          "vpc": "bastion",
          "subnet_tiers": [
            "ingress"
          ],
          "ingress": [
            {
              "rule_no": 100,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "0.0.0.0/0",
              "from_port": 22,
              "to_port": 22
            }
          ],
          "egress": [
            {
              "rule_no": 100,
              "action": "allow",
              "protocol": "tcp",
              "cidr": "0.0.0.0/0",
              "from_port": 0,
              "to_port": 65535
            }
          ]
        }
      ],
      "vpc_endpoints": {
        "interface": [
          {
            "name": "ssm",
            "service": "ssm",
            "vpc": "shared-services",
            "subnet_tiers": [
              "app"
            ],
            "allowed_cidrs": [
              "10.30.0.0/16"
            ]
          },
          {
            "name": "logs",
            "service": "logs",
            "vpc": "shared-services",
            "subnet_tiers": [
              "app"
            ],
            "allowed_cidrs": [
              "10.30.0.0/16"
            ]
          }
        ]
      },
      "nat_gateways": [
        {
          "name": "apne1-shared-nat",
          "vpc": "shared-services",
          "public_subnet_tier": "ingress",
          "private_subnet_tiers": [
            "app",
            "data"
          ]
        }
      ],
      "vpc_peerings": [
        {
          "name": "apne1-shared-to-logging",
          "vpc_a": "shared-services",
          "vpc_b": "logging"
        }
      ],
      "prefix_lists": [
        {
          "name": "apne1-services",
          "entries": [
            {
              "cidr": "10.30.32.0/20",
              "description": "DMZ"
            },
            {
              "cidr": "10.30.56.0/21",
              "description": "Logging"
            }
          ]
        }
      ]
    }
  },
  "aws_network_manager": {
    "enable": true,
    "global_name": "skyforge-global-network",
    "description": "Skyforge multi-region global network for Network Manager",
    "sites": [
      {
        "name": "skyforge-us-east-1-site",
        "region": "us-east-1",
        "address": "Ashburn, VA"
      },
      {
        "name": "skyforge-eu-central-1-site",
        "region": "eu-central-1",
        "address": "Frankfurt, Germany"
      },
      {
        "name": "skyforge-ap-northeast-1-site",
        "region": "ap-northeast-1",
        "address": "Tokyo, Japan"
      }
    ],
    "devices": [
      {
        "name": "skyforge-us-east-1-tgw",
        "site_name": "skyforge-us-east-1-site",
        "type": "transit-gateway"
      },
      {
        "name": "skyforge-eu-central-1-tgw",
        "site_name": "skyforge-eu-central-1-site",
        "type": "transit-gateway"
      },
      {
        "name": "skyforge-ap-northeast-1-tgw",
        "site_name": "skyforge-ap-northeast-1-site",
        "type": "transit-gateway"
      }
    ]
  },
  "aws_global_app": {
    "enable": true,
    "listener_ports": [80, 443],
    "record_name": "global-app",
    "health_check": {
      "protocol": "HTTP",
      "port": 80,
      "interval": 30,
      "threshold": 3
    },
    "endpoint_weights": {
      "us-east-1": 100,
      "eu-central-1": 90,
      "ap-northeast-1": 90
    }
  },
  "aws_reachability": {
    "us-east-1": {
      "paths": [
        {
          "name": "dmz-to-shared",
          "description": "DMZ attachment toward shared-services application VPC",
          "source_vpc": "dmz",
          "destination_vpc": "shared-services",
          "protocol": "TCP",
          "destination_port": 443
        },
        {
          "name": "shared-to-logging",
          "description": "Shared services application flow to logging VPC",
          "source_vpc": "shared-services",
          "destination_vpc": "logging",
          "protocol": "TCP",
          "destination_port": 6514
        }
      ]
    },
    "ap-northeast-1": {
      "paths": [
        {
          "name": "apne1-dmz-to-shared",
          "description": "Tokyo VPC flow from DMZ to shared services",
          "source_vpc": "dmz",
          "destination_vpc": "shared-services",
          "protocol": "TCP",
          "destination_port": 443
        }
      ]
    }
  }
}
