{
  "gcp_regions": {
    "us-central1": {
      "project_id": "skyforge-475919",
      "region": "us-central1",
      "cidr_block": "10.90.0.0/16",
      "ipv6_prefix": "2600:90::/56",
      "enable_ha_vpn": true,
      "enable_cloud_natt": true,
      "vpcs": {
        "shared-services": {
          "cidr_block": "10.90.0.0/20",
          "routing_mode": "GLOBAL",
          "subnet_count": 3,
          "create_firewall": true,
          "subnet_prefix_extension": 4,
          "tier_labels": ["frontend", "app", "data"]
        },
        "inspection": {
          "cidr_block": "10.90.16.0/20",
          "routing_mode": "GLOBAL",
          "subnet_count": 3,
          "create_firewall": true,
          "subnet_prefix_extension": 4,
          "tier_labels": ["ingress", "inspection", "egress"]
        }
      },
      "workloads": {
        "gke": {
          "vpc_name": "shared-services",
          "subnet_tier": "app",
          "node_count": 2,
          "node_machine": "e2-standard-2",
          "disk_size_gb": 50,
          "disk_type": "pd-standard",
          "deletion_protection": false
        },
        "cloud_run": {
          "service_name": "skyforge-demo",
          "image": "gcr.io/cloudrun/hello",
          "port": 8080,
          "allow_unauthenticated": true
        },
        "storage": {
          "location": "US"
        },
        "pubsub": {
          "topic_name": "skyforge-demo-topic",
          "subscription_name": "skyforge-demo-sub"
        },
        "sql": {
          "database_version": "POSTGRES_15",
          "tier": "db-custom-2-7680"
        },
        "global_lb": {
          "backend_type": "cloud_run",
          "description": "Skyforge global HTTP load balancer fronting Cloud Run"
        }
      },
      "checkpoint_firewall": {
        "vpc_name": "inspection",
        "subnet_tier": "ingress",
        "machine_type": "n2-standard-4",
        "startup_script": "#!/bin/bash\nset -e\niptables -F\niptables -P INPUT DROP\niptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\niptables -A INPUT -p tcp -s 198.51.100.0/24 --dport 22 -j ACCEPT\niptables -A INPUT -p tcp -s 198.51.100.0/24 --dport 443 -j ACCEPT\niptables -A INPUT -p tcp -s 10.90.0.0/16 --dport 6514 -j ACCEPT\niptables -A INPUT -p udp -s 10.90.0.0/16 --dport 514 -j ACCEPT\niptables -A INPUT -p tcp -s 10.90.0.0/16 --dport 30080 -j ACCEPT\niptables -A INPUT -p tcp -s 10.90.0.0/16 --dport 30443 -j ACCEPT\niptables -A INPUT -p tcp --dport 23 -j DROP\niptables -A INPUT -p tcp --dport 22 -j LOG --log-prefix \"DROP SSH \"\niptables -A INPUT -j LOG --log-prefix \"DROP OTHER \"\n",
        "metadata": {
          "skyforge-policy": "checkpoint-demo"
        }
      }
    },
    "europe-west1": {
      "project_id": "skyforge-475919",
      "region": "europe-west1",
      "cidr_block": "10.100.0.0/16",
      "ipv6_prefix": "2600:100::/56",
      "enable_ha_vpn": true,
      "enable_cloud_natt": true,
      "vpcs": {
        "shared-services": {
          "cidr_block": "10.100.0.0/20",
          "routing_mode": "GLOBAL",
          "subnet_count": 2,
          "create_firewall": true,
          "subnet_prefix_extension": 4,
          "tier_labels": ["frontend", "app", "data"]
        }
      },
      "workloads": {
        "cloud_run": {
          "service_name": "skyforge-eu",
          "image": "gcr.io/cloudrun/hello",
          "port": 8080,
          "allow_unauthenticated": true
        },
        "storage": {
          "location": "EU"
        },
        "sql": {
          "database_version": "POSTGRES_15",
          "tier": "db-custom-2-7680",
          "region": "europe-west1"
        }
      }
    },
    "asia-southeast1": {
      "project_id": "skyforge-475919",
      "region": "asia-southeast1",
      "cidr_block": "10.110.0.0/16",
      "ipv6_prefix": "2600:110::/56",
      "enable_ha_vpn": true,
      "enable_cloud_natt": true,
      "vpcs": {
        "shared-services": {
          "cidr_block": "10.110.0.0/20",
          "routing_mode": "GLOBAL",
          "subnet_count": 2,
          "create_firewall": true,
          "subnet_prefix_extension": 4,
          "tier_labels": ["frontend", "app", "data"]
        }
      },
      "workloads": {
        "storage": {
          "location": "ASIA"
        },
        "pubsub": {
          "topic_name": "skyforge-apac-topic",
          "subscription_name": "skyforge-apac-sub"
        }
      }
    }
  },
  "gcp_reachability": {
    "us-central1": {
      "tests": [
        {
          "name": "frontend-to-cloudrun",
          "source_ip": "10.90.0.5",
          "destination_ip": "10.90.16.10",
          "protocol": "TCP",
          "destination_port": 443,
          "description": "Simulate shared frontend to Cloud Run HTTPS"
        },
        {
          "name": "app-to-logging",
          "source_ip": "10.90.0.10",
          "destination_ip": "10.90.16.10",
          "protocol": "TCP",
          "destination_port": 6514
        }
      ]
    },
    "europe-west1": {
      "tests": [
        {
          "name": "shared-to-sql",
          "source_ip": "10.100.0.10",
          "destination_ip": "10.100.0.30",
          "protocol": "TCP",
          "destination_port": 5432
        }
      ]
    },
    "asia-southeast1": {
      "tests": [
        {
          "name": "frontend-to-shared",
          "source_ip": "10.110.0.10",
          "destination_ip": "10.110.0.20",
          "protocol": "TCP",
          "destination_port": 443
        }
      ]
    }
  }
}
